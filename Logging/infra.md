# Infrastructure Logs in OCP

Logs generated by infrastructure components running in the cluster and OpenShift Container Platform nodes, such as journal logs. Infrastructure components are pods that run in the openshift*, kube*, or default projects.

- journal logs:
- openshift*:
- kube*:
- default ns:



## Logging Level
The valid values for operatorLogLevel are Normal, Debug, and Trace. Trace has the most detailed information. The default operatorlogLevel is Normal. There are seven logging levels for issues: Trace, Debug, Info, Warning, Error, Fatal and Panic. After the logging level is set, log entries with that severity or anything above it will be logged.
- operatorLogLevel: "Normal" sets logrus.SetLogLevel("Info").
- operatorLogLevel: "Debug" sets logrus.SetLogLevel("Debug").
- operatorLogLevel: "Trace" sets logrus.SetLogLevel("Trace").

For openshift-apiserver:
```diff
oc patch openshiftapiserver.operator/cluster --type=json -p '[{"op": "replace", "path": "/spec/logLevel", "value": "LOGLEVEL" }]'
```
For kube-apiserver
```diff
oc patch kubeapiserver.operator/cluster --type=json -p '[{"op": "replace", "path": "/spec/logLevel", "value": "LOGLEVEL" }]'
```
For kube-controller-manager
```diff
oc patch kubecontrollermanagers.operator/cluster --type=json -p '[{"op": "replace", "path": "/spec/logLevel", "value": "LOGLEVEL" }]'
```
For openshift-controller-manager
```diff
oc patch openshiftcontrollermanagers.operator/cluster --type=json -p '[{"op": "replace", "path": "/spec/logLevel", "value": "LOGLEVEL" }]'
```
For kube-scheduler
```diff
oc patch kubeschedulers.operator/cluster --type=json -p '[{"op": "replace", "path": "/spec/logLevel", "value": "LOGLEVEL" }]'
```
For authentication (pods at openshift-authentication and openshift-oauth-apiserver projects):
```diff
oc patch authentications.operator/cluster --type=json -p '[{"op": "replace", "path": "/spec/logLevel", "value": "LOGLEVEL" }]'
```

## Configure log rotation
```
# oc get kubeletconfig
  spec:
    kubeletConfig:
      containerLogMaxSize: 50Mi
      containerLogMaxFiles: 5              
    machineConfigPoolSelector:
      matchLabels:
        custom-kubelet: logrotation   
        
# cat /etc/kubernetes/kubelet.conf
  containerLogMaxSize: 50Mi
  containerLogMaxFiles: 5
```
